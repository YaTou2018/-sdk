"use strict";var YS=YS||{};YS.EventDispatcher=function(spec){var that={};var isArray=function(object){return object&&typeof object==="object"&&typeof object.length==="number"&&typeof object.splice==="function"&&!object.propertyIsEnumerable("length")};spec.dispatcher={};spec.dispatcher.eventListeners={};spec.dispatcher.backupListerners={};that.addEventListener=function(eventType,listener,backupid){if(eventType===undefined||eventType===null){return}if(spec.dispatcher.eventListeners[eventType]===undefined){spec.dispatcher.eventListeners[eventType]=[]}spec.dispatcher.eventListeners[eventType].push(listener);if(backupid){if(spec.dispatcher.backupListerners[backupid]===undefined){spec.dispatcher.backupListerners[backupid]=[]}spec.dispatcher.backupListerners[backupid].push({eventType:eventType,listener:listener})}};that.removeEventListener=function(eventType,listener){var index;if(!spec.dispatcher.eventListeners[eventType]){L.Logger.info("[ys-fake-sdk]not event type: "+eventType);return}index=spec.dispatcher.eventListeners[eventType].indexOf(listener);if(index!==-1){spec.dispatcher.eventListeners[eventType].splice(index,1)}};that.removeAllEventListener=function(eventTypeArr){if(isArray(eventTypeArr)){for(var i in eventTypeArr){var eventType=eventTypeArr[i];delete spec.dispatcher.eventListeners[eventType]}}else if(typeof eventTypeArr==="string"){delete spec.dispatcher.eventListeners[eventTypeArr]}else if(typeof eventTypeArr==="object"){for(var key in eventTypeArr){var eventType=key,listener=eventTypeArr[key];that.removeEventListener(eventType,listener)}}};that.dispatchEvent=function(event,log){var listener;log=log!=undefined?log:true;if(log){L.Logger.debug("[ys-fake-sdk]dispatchEvent , event type: "+event.type)}for(listener in spec.dispatcher.eventListeners[event.type]){if(spec.dispatcher.eventListeners[event.type].hasOwnProperty(listener)){spec.dispatcher.eventListeners[event.type][listener](event)}}};that.removeBackupListerner=function(backupid){if(backupid){if(spec.dispatcher.backupListerners[backupid]){for(var i=0;i<spec.dispatcher.backupListerners[backupid].length;i++){var backupListernerInfo=spec.dispatcher.backupListerners[backupid][i];that.removeEventListener(backupListernerInfo.eventType,backupListernerInfo.listener)}spec.dispatcher.backupListerners[backupid].length=0;delete spec.dispatcher.backupListerners[backupid]}}};return that};YS.RoadofEvent=function(spec){var that={};that.type=spec.type;return that};YS.RoomEvent=function(spec,extraSpec){var that=YS.RoadofEvent(spec);that.streams=spec.streams;that.message=spec.message;that.user=spec.user;if(extraSpec&&typeof extraSpec==="object"){for(var key in extraSpec){that[key]=extraSpec[key]}}return that};YS.StreamEvent=function(spec,extraSpec){var that=YS.RoadofEvent(spec);that.stream=spec.stream;that.message=spec.message;that.bandwidth=spec.bandwidth;that.attrs=spec.attrs;if(extraSpec&&typeof extraSpec==="object"){for(var key in extraSpec){that[key]=extraSpec[key]}}return that};YS.PublisherEvent=function(spec,extraSpec){var that=YS.RoadofEvent(spec);if(extraSpec&&typeof extraSpec==="object"){for(var key in extraSpec){that[key]=extraSpec[key]}}return that};YS.clientSdkEventManager=YS.EventDispatcher({});YS.clientUICoreEventManager=YS.EventDispatcher({});YS.mobileSdkEventManager=YS.EventDispatcher({});YS.mobileUICoreEventManager=YS.EventDispatcher({});var YS=YS||{};YS.SDKTYPE=undefined;YS.isOnlyAudioRoom=false;YS.extendSendInterfaceName="";YS.SDKNATIVENAME=undefined;YS.global={fakeJsSdkInitInfo:{debugLog:false,playback:false,deviceType:undefined,mobileInfo:{isSendLogMessageToProtogenesis:false,clientType:undefined}}};YS.QtNativeClientRoom=function(roomOptions){YS.SDKNATIVENAME="QtNativeClientRoom";YS.SDKTYPE="pc";return YS.Room(roomOptions)};YS.MobileNativeRoom=function(roomOptions){YS.SDKNATIVENAME="MobileNativeRoom";YS.SDKTYPE="mobile";return YS.Room(roomOptions)};YS.Room=function(roomOptions){"use strict";if(!YS.SDKNATIVENAME){L.Logger.error("[ys-fake-sdk]Room is not init!");return}roomOptions=roomOptions||{};YS.SDKVERSIONS="2.2.1";YS.SDKVERSIONSTIME="2018082114";L.Logger.info("[ys-sdk-version]sdk-version:"+YS.SDKVERSIONS+" , sdk-time: "+YS.SDKVERSIONSTIME);var spec={};var that=YS.EventDispatcher(spec);var ERR_HTTP_REQUEST_FAILED=3;var _myself={},_users={},_room_properties={},_isPlayback=false,_rolelist={},_fistSetLog=false,_room_name=undefined,_room_type=undefined,_is_room_live=false,_room_max_videocount=undefined,_room_id=undefined,_web_protocol=undefined,_web_host=undefined,_web_port=undefined,_doc_protocol=undefined,_doc_host=undefined,_doc_port=undefined,_backup_doc_protocol=undefined,_backup_doc_host=undefined,_backup_doc_port=undefined,_whiteboardManagerInstance=undefined,socketBindListMap={},_backup_doc_host_list=[];var _roomMode=window.YS.ROOM_MODE.NORMAL_ROOM;that.socket=YS.fakeScoketIO(that);that.setLogIsDebug=function(isDebug,logLevel){isDebug=isDebug||false;if(logLevel!==undefined){if(logLevel===0){isDebug=true}else{isDebug=false}}var socketLogConfig={debug:isDebug},loggerConfig={development:isDebug,logLevel:logLevel!==undefined&&typeof logLevel==="number"?logLevel:isDebug?L.Constant.LOGLEVEL.DEBUG:L.Constant.LOGLEVEL.INFO},adpConfig={webrtcLogDebug:isDebug};YS.ysLogPrintConfig(socketLogConfig,loggerConfig,adpConfig)};that.getRoomProperties=function(){return _room_properties};that.getUsers=function(){return _users};that.getUser=function(id){if(id===undefined)return undefined;return _users[id]};that.getMySelf=function(){return _myself};that.changeExtendSendInterfaceName=function(extendSendInterfaceName){YS.extendSendInterfaceName=extendSendInterfaceName};that.startShareMedia=function(url,isVideo,toID,attrs){if(!url){L.Logger.error("[ys-fake-sdk]startShareMedia url can not be empty!");return}var attributes={type:"media"};isVideo=isVideo!==undefined?isVideo:false;if(toID!==undefined){attributes.toID=toID}if(attrs&&typeof attrs==="object"){for(var key in attrs){if(key!=="toID"&&key!=="type"){attributes[key]=attrs[key]}}}var startShareMediaJson={audio:true,video:isVideo,url:url,attributes:attributes};_sendMessageSocket("publishNetworkMedia",startShareMediaJson)};that.stopShareMedia=function(){_sendMessageSocket("unpublishNetworkMedia")};that.onPageFinished=function(){_sendMessageSocket("onPageFinished")};that.pubMsg=function(params){if(typeof params!=="object"){L.Logger.error("[ys-sdk]pubMsg params must is json!");return}var _params={};_params.name=params["name"]||params["msgName"];_params.id=params["id"]||params["msgId"]||_params.name;_params.toID=params["toID"]||params["toId"]||"__all";_params.data=params["data"];if(!params["save"]){_params.do_not_save=""}if(params["associatedMsgID"]!==undefined){_params.associatedMsgID=params["associatedMsgID"]}if(params["associatedUserID"]!==undefined){_params.associatedUserID=params["associatedUserID"]}var expandParams={};for(var key in params){if(_params[key]===undefined&&params[key]!==undefined&&key!=="save"&&key!=="name"&&key!=="msgName"&&key!=="id"&&key!=="msgId"&&key!=="toID"&&key!=="toId"&&key!=="data"&&key!=="associatedMsgID"&&key!=="associatedUserID"){expandParams[key]=params[key]}}_params.expandParams=expandParams;_sendMessageSocket("pubMsg",_params)};that.delMsg=function(params){var name,id,toID,data;if(arguments.length===1&&params&&typeof params==="object"){name=params["name"]||params["msgName"];id=params["id"]||params["msgId"];toID=params["toID"]||params["toId"];data=params["data"]}else{name=arguments[0];id=arguments[1];toID=arguments[2];data=arguments[3]}var _params={};_params.name=name;_params.id=id||_params.name;_params.toID=toID||"__all";_params.data=data;if(_params.name===undefined||_params.name===null){L.Logger.error("[ys-fake-sdk]delMsg name is must exist!");return}if(_params.id===undefined||_params.id===null){L.Logger.error("[ys-fake-sdk]delMsg id is must exist!");return}_sendMessageSocket("delMsg",_params)};that.changeUserProperty=function(id,tellWhom,properties){if(YS.isOnlyAudioRoom&&properties.publishstate!==undefined&&(properties.publishstate===YS.PUBLISH_STATE_VIDEOONLY||properties.publishstate===YS.PUBLISH_STATE_BOTH)){L.Logger.warning("[ys-fake-sdk]The publishstate of a pure audio room cannot be "+properties.publishstate+"!");return}if(properties===undefined||id===undefined){L.Logger.error("[ys-fake-sdk]changeUserProperty properties or id is not exist!");return}var params={};params.id=id;params.toID=tellWhom||"__all";var user=_users[id];if(!user){L.Logger.error("[ys-fake-sdk]user is not exist , user id: "+id+"!");return}if(!(properties&&typeof properties==="object")){L.Logger.error("[ys-fake-sdk]properties must be json , user id: "+id+"!");return}params.properties=properties;_sendMessageSocket("setProperty",params)};that.changeWebPageFullScreen=function(isFullScreen){_sendMessageSocket("changeWebPageFullScreen",{fullScreen:isFullScreen})};that.leaveroom=function(force){force=force||false;_sendMessageSocket("leaveroom",{force:force})};that.sendMessage=function(textMessage,toID,extendJson,options){var params={};toID=toID||"__all";params.toID=toID;var message={};if(typeof textMessage==="string"){var textMessageCopy=L.Utils.toJsonParse(textMessage);if(typeof textMessageCopy!=="object"){textMessageCopy=textMessage}textMessage=textMessageCopy}if(typeof textMessage==="object"){for(var key in textMessage){message[key]=textMessage[key]}}else{message.msg=textMessage}if(typeof extendJson==="string"){extendJson=L.Utils.toJsonParse(extendJson)}if(extendJson&&typeof extendJson==="object"){for(var key in extendJson){message[key]=extendJson[key]}}params.message=L.Utils.toJsonStringify(message);var expandParams={};if(options&&options.isToSender){expandParams.isToSender=true}params.expandParams=expandParams;_sendMessageSocket("sendMessage",params)};that.sendActionCommand=function(action,cmd){if(!action){L.Logger.warning("[ys-fake-sdk]sendActionCommand method action can not be empty!");return}_sendMessageSocket("sendActionCommand",{action:action,cmd:cmd})};that.setLocalStorageItem=function(key,value){_sendMessageSocket("saveValueByKey",{key:""+key,value:""+value})};that.getLocalStorageItem=function(key,callback){var _callback=undefined;if(typeof callback==="function"){_callback=function(value){if(value===null||value===undefined||value==="null"||value==="undefined"){value=""}callback(""+value)}}_sendMessageSocket("getValueByKey",{key:""+key},_callback)};that.exitAnnotation=function(state){if(typeof state!=="string"){L.Logger.error("[ys-fake-sdk]state is not a string");return}_sendMessageSocket("exitAnnotation",state)};that.registerRoomWhiteBoardDelegate=function(whiteboardManagerInstance){if(whiteboardManagerInstance&&whiteboardManagerInstance.className==="YSWhiteBoardManager"&&typeof whiteboardManagerInstance.registerRoomDelegate==="function"){_whiteboardManagerInstance=whiteboardManagerInstance;if(_whiteboardManagerInstance){if(_whiteboardManagerInstance.registerRoomDelegate){var _receiveActionCommand=function(action,cmd){L.Logger.debug("[ys-sdk]receive whiteboard sdk action command（action,cmd）:",action,cmd);that.sendActionCommand(action,cmd)};_whiteboardManagerInstance.registerRoomDelegate(that,_receiveActionCommand)}if(_whiteboardManagerInstance.changeCommonWhiteBoardConfigration){var updateeCommonWhiteBoardConfigration={};if(_web_protocol&&_web_host&&_web_port!==undefined){updateeCommonWhiteBoardConfigration.webAddress={protocol:_web_protocol,hostname:_web_host,port:_web_port}}if(_doc_protocol&&_doc_host&&_doc_port!==undefined){updateeCommonWhiteBoardConfigration.webAddress={protocol:_doc_protocol,hostname:_doc_host,port:_doc_port}}if(_backup_doc_host_list.length){var backupDocAddressList=[];for(var i=0,length=_backup_doc_host_list.length;i<length;i++){backupDocAddressList.push({protocol:_backup_doc_protocol,hostname:_backup_doc_host_list[i],port:_backup_doc_port})}updateeCommonWhiteBoardConfigration.backupDocAddressList=backupDocAddressList}if(_myself.id!==undefined){updateeCommonWhiteBoardConfigration.myUserId=_myself.id}if(_myself.nickname!==undefined){updateeCommonWhiteBoardConfigration.myName=_myself.nickname}if(_myself.role!==undefined){updateeCommonWhiteBoardConfigration.myRole=_myself.role}updateeCommonWhiteBoardConfigration.isPlayback=_isPlayback;updateeCommonWhiteBoardConfigration.deviceType=YS.global.fakeJsSdkInitInfo.deviceType;updateeCommonWhiteBoardConfigration.clientType=YS.global.fakeJsSdkInitInfo.mobileInfo.clientType;_whiteboardManagerInstance.changeCommonWhiteBoardConfigration(updateeCommonWhiteBoardConfigration)}}}else{L.Logger.warning("[ys-sdk]register whiteboardManagerInstance not is a YSWhiteBoardManager instance class , cannot execute registerRoomWhiteBoardDelegate method.")}};socketBindListMap={setProperty:function(messages){L.Logger.debug("[ys-fake-sdk]setProperty info:",L.Utils.toJsonStringify(messages));var param=messages;var userid=param.id;if(param.hasOwnProperty("properties")){var properties=param.properties;var user=_users[userid];if(_myself.id===userid){user=_myself}if(user===undefined){L.Logger.error("[ys-fake-sdk]setProperty user is not exist , userid is "+userid+"!");return}for(var key in properties){if(key!=="id"&&key!=="watchStatus"){user[key]=properties[key]}}var roomEvt=YS.RoomEvent({type:"room-userproperty-changed",user:user,message:properties},{fromID:param.fromID});that.dispatchEvent(roomEvt);if(_roomMode===window.YS.ROOM_MODE.BIG_ROOM){if(userid!==_myself.id&&_users[userid].role!==window.YS.ROOM_ROLE.TEACHER&&_users[userid].role!==window.YS.ROOM_ROLE.ASSISTANT){if(_users[userid].publishstate===YS.PUBLISH_STATE_NONE){delete _users[userid]}}}}},participantLeft:function(userid,leaveTs){L.Logger.debug("[ys-fake-sdk]participantLeft userid:"+userid);var user=_users[userid];if(user===undefined){L.Logger.error("[ys-fake-sdk]participantLeft user is not exist , userid is "+userid+"!");return}L.Logger.info("[ys-fake-sdk]user leave room  , user info: "+L.Utils.toJsonStringify(user));if(_isPlayback&&leaveTs!==undefined){user.leaveTs=leaveTs}if(!_rolelist[user.role]){_rolelist[user.role]={}}if(!_isPlayback){delete _rolelist[user.role][userid];delete _users[userid]}else{if(_users[userid]){_users[userid].playbackLeaved=true}}if(_isPlayback&&typeof userid==="object"){var userinfo=userid;user.leaveTs=userinfo.ts}var roomEvt=YS.RoomEvent({type:"room-participant_leave",user:user});that.dispatchEvent(roomEvt)},participantJoined:function(userinfo){L.Logger.debug("[ys-fake-sdk]participantJoined userinfo:"+L.Utils.toJsonStringify(userinfo));var user=YS.RoomUser(userinfo);L.Logger.info("[ys-fake-sdk]user join room  , user info: "+L.Utils.toJsonStringify(user));if(!_rolelist[user.role]){_rolelist[user.role]={}}_rolelist[user.role][user.id]=user;_users[user.id]=user;if(_isPlayback&&_users[user.id]){delete _users[user.id].playbackLeaved}if(_isPlayback&&typeof userinfo==="object"){user.joinTs=userinfo.ts}var roomEvt=YS.RoomEvent({type:"room-participant_join",user:user});that.dispatchEvent(roomEvt)},participantEvicted:function(messages){messages=messages||{};L.Logger.info("[ys-fake-sdk]user evicted room  , user info: "+L.Utils.toJsonStringify(_myself)+" , participantEvicted  messages:"+L.Utils.toJsonStringify(messages));var roomEvt=YS.RoomEvent({type:"room-participant_evicted",message:messages,user:_myself});that.dispatchEvent(roomEvt)},pubMsg:function(messages){L.Logger.debug("[ys-fake-sdk]pubMsg info:",L.Utils.toJsonStringify(messages));if(messages&&typeof messages==="string"){messages=L.Utils.toJsonParse(messages)}if(messages.data&&typeof messages.data==="string"){messages.data=L.Utils.toJsonParse(messages.data)}if(messages.name==="OnlyAudioRoom"){_handleSwitchOnlyAudioRoom(true,messages.fromID)}if(messages.name==="BigRoom"){_roomMode=window.YS.ROOM_MODE.BIG_ROOM;_removeBigRoomUsers();var roomEvt=YS.RoomEvent({type:"room-mode-changed",message:{roomMode:_roomMode}});that.dispatchEvent(roomEvt)}var roomEvt=YS.RoomEvent({type:"room-pubmsg",message:messages});that.dispatchEvent(roomEvt)},delMsg:function(messages){L.Logger.debug("[ys-fake-sdk]delMsg info:",L.Utils.toJsonStringify(messages));if(messages&&typeof messages==="string"){messages=L.Utils.toJsonParse(messages)}if(messages.data&&typeof messages.data==="string"){messages.data=L.Utils.toJsonParse(messages.data)}if(messages.name==="OnlyAudioRoom"){_handleSwitchOnlyAudioRoom(false,messages.fromID)}if(messages.name==="BigRoom"){_roomMode=window.YS.ROOM_MODE.NORMAL_ROOM;_removeBigRoomUsers();var roomEvt=YS.RoomEvent({type:"room-mode-changed",message:{roomMode:_roomMode}});that.dispatchEvent(roomEvt)}var roomEvt=YS.RoomEvent({type:"room-delmsg",message:messages});that.dispatchEvent(roomEvt)},sendMessage:function(messages){L.Logger.debug("[ys-fake-sdk]room-text-message info:"+(messages&&typeof messages==="object"?L.Utils.toJsonStringify(messages):messages));if(!(messages&&messages.hasOwnProperty("message"))){L.Logger.error("[ys-fake-sdk]room-text-message messages or messages.message is not exist!");return}var from=messages.fromID;var user=_myself;if(_room_properties.roomtype===10){user=undefined}else{if(from!==undefined)user=_users[messages.fromID];if(!user){L.Logger.error("[ys-fake-sdk]user is not exist , user id:"+messages.fromID+", message from room-text-message!");return}}if(_isPlayback){var isString=false;if(messages&&messages.message&&typeof messages.message==="string"){messages.message=L.Utils.toJsonParse(messages.message);isString=true}messages.message.ts=messages.ts;if(isString&&typeof messages.message==="object"){messages.message=L.Utils.toJsonStringify(messages.message)}}if(messages&&messages.message&&typeof messages.message==="string"){messages.message=L.Utils.toJsonParse(messages.message)}var roomEvt=YS.RoomEvent({type:"room-text-message",user:user,message:messages.message});that.dispatchEvent(roomEvt)},roomConnected:function(code,response){L.Logger.debug("[ys-fake-sdk]room-connected code is "+code+" , response is :"+L.Utils.toJsonStringify(response));if(code!==0){L.Logger.error("[ys-fake-sdk]connectSocket failure , code is "+code+" , response is "+response);return}var roominfo=response.roominfo;var msglist=response.msglist;var userlist=response.userlist;var roomId,arg;that.p2p=roominfo.p2p;roomId=roominfo.id;_users={};_rolelist={};if(response.myself&&typeof response.myself==="object"){_myself=YS.RoomUser(response.myself)}if(!_rolelist[_myself.role]){_rolelist[_myself.role]={}}_rolelist[_myself.role][_myself.id]=_myself;_users[_myself.id]=_myself;for(var index in userlist){if(userlist.hasOwnProperty(index)){var userproperties=userlist[index];var user=YS.RoomUser(userproperties);if(user!==undefined){if(!_rolelist[user.role]){_rolelist[user.role]={}}_rolelist[user.role][user.id]=user;_users[user.id]=user;if(_isPlayback&&_users[user.id]){delete _users[user.id].playbackLeaved}L.Logger.info("[ys-fake-sdk]room-connected --\x3e user info: "+L.Utils.toJsonStringify(user))}}}L.Logger.info("[ys-fake-sdk]room-connected --\x3e myself info: "+L.Utils.toJsonStringify(_myself));var msgs=new Array;if(msglist&&typeof msglist=="string"){msglist=L.Utils.toJsonParse(msglist)}if(msglist.hasOwnProperty("OnlyAudioRoom")){var messages=msglist["OnlyAudioRoom"];_handleSwitchOnlyAudioRoom(true,messages.fromID)}if(msglist.hasOwnProperty("BigRoom")){_roomMode=window.YS.ROOM_MODE.BIG_ROOM;_removeBigRoomUsers()}else{_roomMode=window.YS.ROOM_MODE.NORMAL_ROOM}var roomEvt=YS.RoomEvent({type:"room-mode-changed",message:{roomMode:_roomMode}});that.dispatchEvent(roomEvt);for(index in msglist){if(msglist.hasOwnProperty(index)){msgs.push(msglist[index])}}msgs.sort(function(obj1,obj2){if(obj1===undefined||!obj1.hasOwnProperty("seq")||obj2===undefined||!obj2.hasOwnProperty("seq"))return 0;return obj1.seq-obj2.seq});that.roomID=roomId;L.Logger.debug("[ys-fake-sdk]Connected to room "+that.roomID);L.Logger.debug("[ys-fake-sdk]connected response:",L.Utils.toJsonStringify(response));L.Logger.info("[ys-fake-sdk]room-connected  signalling list length "+msgs.length);if(_whiteboardManagerInstance){if(_whiteboardManagerInstance.changeCommonWhiteBoardConfigration){var backupDocAddressList=[];for(var i=0,length=_backup_doc_host_list.length;i<length;i++){backupDocAddressList.push({protocol:_backup_doc_protocol,hostname:_backup_doc_host_list[i],port:_backup_doc_port})}_whiteboardManagerInstance.changeCommonWhiteBoardConfigration({webAddress:{protocol:_web_protocol,hostname:_web_host,port:_web_port},docAddress:{protocol:_doc_protocol,hostname:_doc_host,port:_doc_port},backupDocAddressList:backupDocAddressList,myUserId:_myself.id,myName:_myself.nickname,myRole:_myself.role,isConnectedRoom:true,isPlayback:_isPlayback,deviceType:YS.global.fakeJsSdkInitInfo.deviceType,clientType:YS.global.fakeJsSdkInitInfo.mobileInfo.clientType})}}var connectEvt=YS.RoomEvent({type:"room-connected",streams:[],message:msgs});that.dispatchEvent(connectEvt);return true},disconnect:function(messages){L.Logger.debug("[ys-fake-sdk]room-disconnected");_resetRoomState();if(_whiteboardManagerInstance){if(_whiteboardManagerInstance.changeCommonWhiteBoardConfigration){_whiteboardManagerInstance.changeCommonWhiteBoardConfigration({isConnectedRoom:false})}}var disconnectEvt=YS.RoomEvent({type:"room-disconnected",message:messages||"unexpected-disconnection"});that.dispatchEvent(disconnectEvt)},reconnecting:function(reconnectingNum){L.Logger.debug("[ys-fake-sdk]reconnecting info:",reconnectingNum);var disconnectEvt=YS.RoomEvent({type:"room-reconnecting",message:{number:reconnectingNum,info:"room-reconnecting number:"+reconnectingNum}});that.dispatchEvent(disconnectEvt)},reconnected:function(message){var roomEvt=YS.RoomEvent({type:"room-reconnected",message:message});that.dispatchEvent(roomEvt)},leaveroom:function(message){if(_whiteboardManagerInstance){if(_whiteboardManagerInstance.changeCommonWhiteBoardConfigration){_whiteboardManagerInstance.changeCommonWhiteBoardConfigration({isConnectedRoom:false})}}var roomEvt=YS.RoomEvent({type:"room-leaveroom",message:message});that.dispatchEvent(roomEvt)},checkroom:function(response){var userinfo={};var nRet=response.result;var room;var pullInfo;if(nRet==0){room=response.room;pullInfo=response.pullinfo;room.roomtype=Number(room.roomtype);room.maxvideo=parseInt(room.maxvideo);response.roomrole=Number(response.roomrole);var pullConfigureJson={};var pushConfigureJson={};if(pullInfo&&pullInfo.data&&pullInfo.data.pullConfigureList){var pullConfigureList=pullInfo.data.pullConfigureList;for(var i in pullConfigureList){var pullConfigure=pullConfigureList[i];pullConfigureJson[pullConfigure.pullProtocol]=pullConfigure.pullUrlList}}if(pullInfo&&pullInfo.data&&pullInfo.data.pushConfigureInfo){var pushConfigureInfo=pullInfo.data.pushConfigureInfo;for(var i in pushConfigureInfo){var pushConfigure=pushConfigureInfo[i];pushConfigureJson[pushConfigure.pushProtocol]=pushConfigure}}room.pullConfigure=pullConfigureJson;room.pushConfigure=pushConfigureJson;_room_properties=room;_room_name=room.roomname;_room_type=room.roomtype;_is_room_live=_room_type===10;_room_max_videocount=room.maxvideo;userinfo.properties={};userinfo.properties.role=response.roomrole;userinfo.properties.nickname=response.nickname;var id=response.thirdid;if(id!==undefined&&id!="0"&&id!=""){userinfo.id=id}_myself=YS.RoomUser(userinfo);if(_isPlayback){_room_id=room.serial+"_"+_myself.id;if(_room_id&&_room_id.indexOf(":playback")===-1){_room_id+=":playback"}}else{_room_id=room.serial}L.Logger.info("[ys-fake-sdk]"+(_isPlayback?"initPlaybackInfo to checkroom finshed--\x3e":"")+"_room_max_videocount:"+_room_max_videocount,"my id:"+_myself.id,"room id:"+_room_id,"room properties chairmancontrol is:"+(_room_properties.chairmancontrol?window.__YsSdkBuild__?L.Utils.encrypt(_room_properties.chairmancontrol):_room_properties.chairmancontrol:undefined))}else{L.Logger.warning("[ys-fake-sdk]checkroom failure code is "+nRet)}var roomEvt=YS.RoomEvent({type:_isPlayback?"room-checkroom-playback":"room-checkroom",message:{ret:nRet,userinfo:userinfo,roominfo:response}});that.dispatchEvent(roomEvt)},updateWebAddressInfo:function(updateWebAddress){_web_protocol=updateWebAddress.web_protocol||_web_protocol;_web_host=updateWebAddress.web_host||_web_host;_web_port=updateWebAddress.web_port||_web_port;_doc_protocol=updateWebAddress.doc_protocol||_doc_protocol;_doc_host=updateWebAddress.doc_host||_doc_host;_doc_port=updateWebAddress.doc_port||_doc_port;_backup_doc_protocol=updateWebAddress.backup_doc_protocol||_backup_doc_protocol;_backup_doc_host=updateWebAddress.backup_doc_host||_backup_doc_host;_backup_doc_port=updateWebAddress.backup_doc_port||_backup_doc_port;_backup_doc_host_list=updateWebAddress.backup_doc_host_list||_backup_doc_host_list;if(_doc_host===undefined){_doc_host=_web_host}if(_doc_port===undefined){_doc_port=_web_port}if(_backup_doc_host===undefined){_backup_doc_host=_web_host}if(_backup_doc_port===undefined){_backup_doc_port=_web_port}if(!_backup_doc_host_list.length){_backup_doc_host_list=[_backup_doc_host]}if(_whiteboardManagerInstance&&_whiteboardManagerInstance.changeCommonWhiteBoardConfigration){var backupDocAddressList=[];for(var i=0,length=_backup_doc_host_list.length;i<length;i++){backupDocAddressList.push({protocol:_backup_doc_protocol,hostname:_backup_doc_host_list[i],port:_backup_doc_port})}_whiteboardManagerInstance.changeCommonWhiteBoardConfigration({webAddress:{protocol:_web_protocol,hostname:_web_host,port:_web_port},docAddress:{protocol:_doc_protocol,hostname:_doc_host,port:_doc_port},backupDocAddressList:backupDocAddressList})}var Evt=YS.RoomEvent({type:"room-serveraddress-update",message:{web_protocol:_web_protocol,web_host:_web_host,web_port:_web_port,doc_protocol:_doc_protocol,doc_host:_doc_host,doc_port:_doc_port,backup_doc_protocol:_backup_doc_protocol,backup_doc_host:_backup_doc_host,backup_doc_port:_backup_doc_port,backup_doc_host_list:_backup_doc_host_list}});that.dispatchEvent(Evt)},updateFakeJsSdkInitInfo:function(updateData){for(var key in updateData){var value=updateData[key];if(value&&typeof value==="object"){YS.global.fakeJsSdkInitInfo[key]=YS.global.fakeJsSdkInitInfo[key]||{};for(var innerKey in value){YS.global.fakeJsSdkInitInfo[key][innerKey]=value[innerKey]}}else{YS.global.fakeJsSdkInitInfo[key]=value}}if(updateData.debugLog){that.setLogIsDebug(YS.global.fakeJsSdkInitInfo.debugLog)}_isPlayback=YS.global.fakeJsSdkInitInfo.playback;if(_whiteboardManagerInstance&&_whiteboardManagerInstance.changeCommonWhiteBoardConfigration){_whiteboardManagerInstance.changeCommonWhiteBoardConfigration({isPlayback:_isPlayback,deviceType:YS.global.fakeJsSdkInitInfo.deviceType,clientType:YS.global.fakeJsSdkInitInfo.mobileInfo.clientType})}var Evt=YS.RoomEvent({type:"room-updateFakeJsSdkInitInfo",message:updateData});that.dispatchEvent(Evt)},receiveActionCommand:function(action,cmd){var Evt=YS.RoomEvent({type:"room-receiveActionCommand",message:{action:action,cmd:cmd}});that.dispatchEvent(Evt)},playback_clearAll:function(){if(!_isPlayback){L.Logger.warning("[ys-sdk]No playback environment!");return}_roomMode=window.YS.ROOM_MODE.NORMAL_ROOM;var roomModeEvt=YS.RoomEvent({type:"room-mode-changed",message:{roomMode:_roomMode}});that.dispatchEvent(roomModeEvt);var roomEvt=YS.RoomEvent({type:"room-playback-clear_all"});that.dispatchEvent(roomEvt);_playbackClearAll()},duration:function(message){if(!_isPlayback){L.Logger.warning("[ys-sdk]No playback environment!");return}var roomEvt=YS.RoomEvent({type:"room-playback-duration",message:message});that.dispatchEvent(roomEvt)},playbackEnd:function(){if(!_isPlayback){L.Logger.warning("[ys-sdk]No playback environment!");return}var roomEvt=YS.RoomEvent({type:"room-playback-playbackEnd"});that.dispatchEvent(roomEvt)},playback_updatetime:function(message){if(!_isPlayback){L.Logger.warning("[ys-sdk]No playback environment!");return}var roomEvt=YS.RoomEvent({type:"room-playback-playback_updatetime",message:message});that.dispatchEvent(roomEvt)},msgList:function(messages){L.Logger.debug("[ys-sdk]msgList info:",L.Utils.toJsonStringify(messages));var roomEvt=YS.RoomEvent({type:"room-msglist",message:messages});that.dispatchEvent(roomEvt)},participantPublished:function(userinfo){if(typeof userinfo==="string"){userinfo=L.Utils.toJsonParse(userinfo)}L.Logger.debug("[ys-sdk]participantPublished userinfo:"+L.Utils.toJsonStringify(userinfo));if(_roomMode===window.YS.ROOM_MODE.BIG_ROOM){var userCopy=YS.RoomUser(userinfo);var user=_users[userCopy.id];if(user){for(var key in userCopy){user[key]=userCopy[key]}}else{user=userCopy}_users[user.id]=user;if(_isPlayback&&_users[user.id]){delete _users[user.id].playbackLeaved}if(_isPlayback&&typeof userinfo==="object"){user.joinTs=userinfo.ts}}}};function _sendMessageSocket(type,msg,callback){L.Logger.debug("[ys-fake-sdk]sendMessageSocket",type,msg);that.socket.emit(type,msg,callback)}function _resetRoomState(){if(_users!=undefined){_clearRoleList(_rolelist);_clearUsers(_users)}if(_myself){_myself.publishstate=YS.PUBLISH_STATE_NONE}}function _clearUsers(obj){if(!_isPlayback){for(var key in obj){delete obj[key]}}else{for(var key in obj){obj[key].playbackLeaved=true}}}function _clearRoleList(obj){if(!_isPlayback){for(var key in obj){delete obj[key]}}}function _playbackClearAll(){if(!_isPlayback){L.Logger.error("[ys-fake-sdk]No playback environment, no execution playbackClearAll!");return}if(_users!=undefined){_clearRoleList(_rolelist);_clearUsers(_users)}if(_myself!=null){_myself.publishstate=YS.PUBLISH_STATE_NONE}}function _handleSwitchOnlyAudioRoom(isOnlyAudioRoom,fromID){if(YS.isOnlyAudioRoom===isOnlyAudioRoom){return}YS.isOnlyAudioRoom=isOnlyAudioRoom;var connectEvt=YS.RoomEvent({type:"room-audiovideostate-switched",message:{fromId:fromID,onlyAudio:YS.isOnlyAudioRoom}});that.dispatchEvent(connectEvt)}function _removeBigRoomUsers(){if(_roomMode===window.YS.ROOM_MODE.BIG_ROOM){for(var userid in _users){if(userid!==_myself.id&&_users[userid].role!==window.YS.ROOM_ROLE.TEACHER&&_users[userid].role!==window.YS.ROOM_ROLE.ASSISTANT){if(_users[userid].publishstate===YS.PUBLISH_STATE_NONE){delete _users[userid]}}}}}that.setLogIsDebug(YS.global.fakeJsSdkInitInfo.debugLog);if(YS.SDKNATIVENAME==="QtNativeClientRoom"){try{if(qt&&qt.webChannelTransport){new QWebChannel(qt.webChannelTransport,function(channel){window.qtContentYsClient=channel.objects.bridge;for(var type in socketBindListMap){that.socket.on(type,socketBindListMap[type])}that.socket.bindAwitSocketListEvent();L.Logger.debug("[ys-sdk]qtWebChannel init finshed!");var roomEvt=YS.RoomEvent({type:"room-qtWebChannel-finshed"});that.dispatchEvent(roomEvt)})}}catch(e){L.Logger.error("[ys-fake-sdk]qt or qt.webChannelTransport is not exist  ")}}else{for(var type in socketBindListMap){that.socket.on(type,socketBindListMap[type])}}return that};(function(){var DEV=false;var _getUrlParams=function(key){var urlAdd=decodeURIComponent(window.location.href);var urlIndex=urlAdd.indexOf("?");var urlSearch=urlAdd.substring(urlIndex+1);var reg=new RegExp("(^|&)"+key+"=([^&]*)(&|$)","i");var arr=urlSearch.match(reg);if(arr!=null){return arr[2]}else{return""}};if(window.__SDKDEV__!==undefined&&window.__SDKDEV__!==null&&typeof window.__SDKDEV__==="boolean"){try{DEV=window.__SDKDEV__}catch(e){DEV=false}}var debug=DEV||_getUrlParams("debug");window.__YsSdkBuild__=!debug;if(window.localStorage){var debugStr=debug?"*":"none";window.localStorage.setItem("debug",debugStr)}})();"use strict";var YS=YS||{};YS.PUBLISH_STATE_NONE=0;YS.PUBLISH_STATE_AUDIOONLY=1;YS.PUBLISH_STATE_VIDEOONLY=2;YS.PUBLISH_STATE_BOTH=3;YS.PUBLISH_STATE_MUTEALL=4;YS.RoomUser=function(userinfo){if(userinfo==undefined||userinfo.properties===undefined){L.Logger.warning("[ys-fake-sdk]Invalidate user info",id,properties);return undefined}var id=userinfo.id;if(typeof userinfo.properties==="string"){userinfo.properties=L.Utils.toJsonParse(userinfo.properties)}var properties=userinfo.properties;L.Logger.debug("[ys-fake-sdk]RoomUser",id,properties);var that={};that.id=id;that.watchStatus=0;for(var key in properties){if(key!="id"&&key!="watchStatus")that[key]=properties[key]}that.publishstate=that.publishstate||YS.PUBLISH_STATE_NONE;return that};"use strict";var L=L||{};var YS=YS||{};L.Logger=function(L){var DEBUG=0,TRACE=1,INFO=2,WARNING=3,ERROR=4,NONE=5,enableLogPanel,setLogLevel,setOutputFunction,setLogPrefix,outputFunction,logPrefix="",print,debug,trace,info,log,warning,error,setLogDevelopment,developmentEnvironment=false;enableLogPanel=function(){L.Logger.panel=document.createElement("textarea");L.Logger.panel.setAttribute("id","licode-logs");L.Logger.panel.setAttribute("style","position:fixed;left:0;top:0;width: 100%; height: 100%; display: none;z-index:9999;  user-select: text ;-webkit-user-select: text; -moz-user-select: text ; -ms-user-select: text ;");L.Logger.panel.setAttribute("rows",20);L.Logger.panel.setAttribute("cols",20);L.Logger.panel.setAttribute("readOnly",true);if(YS.SDKNATIVENAME==="QtNativeClientRoom"){document.oncontextmenu=null;document.oncontextmenu=function(){return true}}var button=document.createElement("button");button.innerHTML="open log";button.setAttribute("style","position:fixed;left:0;top:0;z-index:10000;background:gold;");button.onclick=function(){if(button.innerHTML==="open log"){L.Logger.panel.style.display="block";button.innerHTML="close log"}else{L.Logger.panel.style.display="none";button.innerHTML="open log"}};document.body.appendChild(button);document.body.appendChild(L.Logger.panel)};setLogLevel=function(level){if(level>L.Logger.NONE){level=L.Logger.NONE}else if(level<L.Logger.DEBUG){level=L.Logger.DEBUG}L.Logger.logLevel=level};setLogDevelopment=function(isDevelopmentEnvironment){developmentEnvironment=isDevelopmentEnvironment};outputFunction=function(args,level){try{switch(level){case L.Logger.DEBUG:developmentEnvironment?console.warn.apply(console,args):console.debug.apply(console,args);break;case L.Logger.TRACE:console.trace.apply(console,args);break;case L.Logger.INFO:developmentEnvironment?console.warn.apply(console,args):console.info.apply(console,args);break;case L.Logger.WARNING:console.warn.apply(console,args);break;case L.Logger.ERROR:console.error.apply(console,args);break;case L.Logger.NONE:console.warn("log level is none!");break;default:developmentEnvironment?console.warn.apply(console,args):console.log.apply(console,args);break}}catch(e){console.log.apply(console,args)}};setOutputFunction=function(newOutputFunction){outputFunction=newOutputFunction};setLogPrefix=function(newLogPrefix){logPrefix=newLogPrefix};print=function(level){var out=logPrefix;if(level<L.Logger.logLevel){return}if(level===L.Logger.DEBUG){out=out+"DEBUG("+(new Date).toLocaleString()+")"}else if(level===L.Logger.TRACE){out=out+"TRACE("+(new Date).toLocaleString()+")"}else if(level===L.Logger.INFO){out=out+"INFO("+(new Date).toLocaleString()+")"}else if(level===L.Logger.WARNING){out=out+"WARNING("+(new Date).toLocaleString()+")"}else if(level===L.Logger.ERROR){out=out+"ERROR("+(new Date).toLocaleString()+")"}out=out+":";var args=[];for(var i=0;i<arguments.length;i++){args[i]=arguments[i]}var tempArgs=args.slice(1);args=[out].concat(tempArgs);if(L.Logger.panel!==undefined){var tmp="";for(var idx=0;idx<args.length;idx++){tmp=tmp+(typeof args[idx]==="object"?L.Utils.toJsonStringify(args[idx]):args[idx])}L.Logger.panel.value=L.Logger.panel.value+"\n"+tmp;outputFunction.apply(L.Logger,[args,level])}else{outputFunction.apply(L.Logger,[args,level])}};debug=function(){var args=[];for(var i=0;i<arguments.length;i++){args[i]=arguments[i]}L.Logger.print.apply(L.Logger,[L.Logger.DEBUG].concat(args))};trace=function(){var args=[];for(var i=0;i<arguments.length;i++){args[i]=arguments[i]}L.Logger.print.apply(L.Logger,[L.Logger.TRACE].concat(args))};info=function(){var args=[];for(var i=0;i<arguments.length;i++){args[i]=arguments[i]}L.Logger.print.apply(L.Logger,[L.Logger.INFO].concat(args))};warning=function(){var args=[];for(var i=0;i<arguments.length;i++){args[i]=arguments[i]}L.Logger.print.apply(L.Logger,[L.Logger.WARNING].concat(args))};error=function(){var args=[];for(var i=0;i<arguments.length;i++){args[i]=arguments[i]}L.Logger.print.apply(L.Logger,[L.Logger.ERROR].concat(args))};return{DEBUG:DEBUG,TRACE:TRACE,INFO:INFO,WARNING:WARNING,ERROR:ERROR,NONE:NONE,setLogDevelopment:setLogDevelopment,enableLogPanel:enableLogPanel,setLogLevel:setLogLevel,setOutputFunction:setOutputFunction,setLogPrefix:setLogPrefix,print:print,debug:debug,trace:trace,info:info,warning:warning,error:error}}(L);YS.ysLogPrintConfig=function(socketLogConfig,loggerConfig,adpConfig){loggerConfig=loggerConfig||{};socketLogConfig=socketLogConfig||{};adpConfig=adpConfig||{};var development=loggerConfig.development!=undefined?loggerConfig.development:true;var logLevel=loggerConfig.logLevel!=undefined?loggerConfig.logLevel:0;var debug=socketLogConfig.debug!=undefined?socketLogConfig.debug:true;var webrtcLogDebug=adpConfig.webrtcLogDebug!=undefined?adpConfig.webrtcLogDebug:true;L.Logger.setLogDevelopment(development);L.Logger.setLogLevel(logLevel);if(L.Utils.localStorage){var debugStr=debug?"*":"none";L.Utils.localStorage.setItem("debug",debugStr)}window.webrtcLogDebug=webrtcLogDebug};"use strict";var L=L||{};L.Constant=function(){return{clientType:{ios:"ios",android:"android"},IOS:"ios",ANDROID:"android",LOGLEVEL:{DEBUG:0,TRACE:1,INFO:2,WARNING:3,ERROR:4,NONE:5}}}(L);"use strict";window.YS=window.YS||{};window.YS_ERR={DEVICE_ERROR_UnknownError:1e4,DEVICE_ERROR_NotFoundError:10001,DEVICE_ERROR_NotAllowedError:10002,DEVICE_ERROR_NotReadableError:10003,DEVICE_ERROR_OverconstrainedError:10004,DEVICE_ERROR_TypeError:10005,TIMEOUT_ERROR:10006};window.YS_VIDEO_MODE={ASPECT_RATIO_CONTAIN:20001,ASPECT_RATIO_COVER:20002};window.YS.ROOM_ROLE={TEACHER:0,ASSISTANT:1,STUDENT:2,AUDIT:3,PATROL:4,SYSTEM_ADMIN:10,ENTERPRISE_ADMIN:11,ADMIN:12,PLAYBACK:-1};window.YS.ROOM_MODE={NORMAL_ROOM:"normalRoom",BIG_ROOM:"bigRoom"};window.YS.ERROR_NOTICE={PUBLISH_AUDIO_VIDEO_FAILURE:40001,SHARE_MEDIA_FAILURE:40003,SHARE_FILE_FAILURE:40004,SHARE_SCREEN_FAILURE:40005,SUBSCRIBE_AUDIO_VIDEO_FAILURE:40007,SUBSCRIBE_MEDIA_FAILURE:40008,SUBSCRIBE_FILE_FAILURE:40009,SUBSCRIBE_SCREEN_FAILURE:40010,UNSUBSCRIBE_AUDIO_VIDEO_FAILURE:40013,UNSUBSCRIBE_MEDIA_FAILURE:40014,UNSUBSCRIBE_FILE_FAILURE:40015,UNSUBSCRIBE_SCREEN_FAILURE:40016,UNPUBLISH_AUDIO_VIDEO_FAILURE:40019,STOP_MEDIA_FAILURE:40020,STOP_FILE_FAILURE:40021,STOP_SCREEN_FAILURE:40022,UDP_CONNECTION_FAILED:40023,UDP_CONNECTION_INTERRUPT:40024};"use strict";var L=L||{};L.aexInstance=undefined;(function(){var Aes={};Aes.cipher=function(input,w){var Nb=4;var Nr=w.length/Nb-1;var state=[[],[],[],[]];for(var i=0;i<4*Nb;i++)state[i%4][Math.floor(i/4)]=input[i];state=Aes.addRoundKey(state,w,0,Nb);for(var round=1;round<Nr;round++){state=Aes.subBytes(state,Nb);state=Aes.shiftRows(state,Nb);state=Aes.mixColumns(state,Nb);state=Aes.addRoundKey(state,w,round,Nb)}state=Aes.subBytes(state,Nb);state=Aes.shiftRows(state,Nb);state=Aes.addRoundKey(state,w,Nr,Nb);var output=new Array(4*Nb);for(var i=0;i<4*Nb;i++)output[i]=state[i%4][Math.floor(i/4)];return output};Aes.keyExpansion=function(key){var Nb=4;var Nk=key.length/4;var Nr=Nk+6;var w=new Array(Nb*(Nr+1));var temp=new Array(4);for(var i=0;i<Nk;i++){var r=[key[4*i],key[4*i+1],key[4*i+2],key[4*i+3]];w[i]=r}for(var i=Nk;i<Nb*(Nr+1);i++){w[i]=new Array(4);for(var t=0;t<4;t++)temp[t]=w[i-1][t];if(i%Nk==0){temp=Aes.subWord(Aes.rotWord(temp));for(var t=0;t<4;t++)temp[t]^=Aes.rCon[i/Nk][t]}else if(Nk>6&&i%Nk==4){temp=Aes.subWord(temp)}for(var t=0;t<4;t++)w[i][t]=w[i-Nk][t]^temp[t]}return w};Aes.subBytes=function(s,Nb){for(var r=0;r<4;r++){for(var c=0;c<Nb;c++)s[r][c]=Aes.sBox[s[r][c]]}return s};Aes.shiftRows=function(s,Nb){var t=new Array(4);for(var r=1;r<4;r++){for(var c=0;c<4;c++)t[c]=s[r][(c+r)%Nb];for(var c=0;c<4;c++)s[r][c]=t[c]}return s};Aes.mixColumns=function(s,Nb){for(var c=0;c<4;c++){var a=new Array(4);var b=new Array(4);for(var i=0;i<4;i++){a[i]=s[i][c];b[i]=s[i][c]&128?s[i][c]<<1^283:s[i][c]<<1}s[0][c]=b[0]^a[1]^b[1]^a[2]^a[3];s[1][c]=a[0]^b[1]^a[2]^b[2]^a[3];s[2][c]=a[0]^a[1]^b[2]^a[3]^b[3];s[3][c]=a[0]^b[0]^a[1]^a[2]^b[3]}return s};Aes.addRoundKey=function(state,w,rnd,Nb){for(var r=0;r<4;r++){for(var c=0;c<Nb;c++)state[r][c]^=w[rnd*4+c][r]}return state};Aes.subWord=function(w){for(var i=0;i<4;i++)w[i]=Aes.sBox[w[i]];return w};Aes.rotWord=function(w){var tmp=w[0];for(var i=0;i<3;i++)w[i]=w[i+1];w[3]=tmp;return w};Aes.sBox=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22];Aes.rCon=[[0,0,0,0],[1,0,0,0],[2,0,0,0],[4,0,0,0],[8,0,0,0],[16,0,0,0],[32,0,0,0],[64,0,0,0],[128,0,0,0],[27,0,0,0],[54,0,0,0]];Aes.Ctr={};Aes.Ctr.encrypt=function(plaintext,password,nBits){password=password||"roadof_2018_@beijing_20180310_roadof_2018_@beijing";nBits=nBits||256;var blockSize=16;if(!(nBits==128||nBits==192||nBits==256))return"";plaintext=Utf8.encode(plaintext);password=Utf8.encode(password);var nBytes=nBits/8;var pwBytes=new Array(nBytes);for(var i=0;i<nBytes;i++){pwBytes[i]=isNaN(password.charCodeAt(i))?0:password.charCodeAt(i)}var key=Aes.cipher(pwBytes,Aes.keyExpansion(pwBytes));key=key.concat(key.slice(0,nBytes-16));var counterBlock=new Array(blockSize);var nonce=(new Date).getTime();var nonceMs=nonce%1e3;var nonceSec=Math.floor(nonce/1e3);var nonceRnd=Math.floor(Math.random()*65535);for(var i=0;i<2;i++)counterBlock[i]=nonceMs>>>i*8&255;for(var i=0;i<2;i++)counterBlock[i+2]=nonceRnd>>>i*8&255;for(var i=0;i<4;i++)counterBlock[i+4]=nonceSec>>>i*8&255;var ctrTxt="";for(var i=0;i<8;i++)ctrTxt+=String.fromCharCode(counterBlock[i]);var keySchedule=Aes.keyExpansion(key);var blockCount=Math.ceil(plaintext.length/blockSize);var ciphertxt=new Array(blockCount);for(var b=0;b<blockCount;b++){for(var c=0;c<4;c++)counterBlock[15-c]=b>>>c*8&255;for(var c=0;c<4;c++)counterBlock[15-c-4]=b/4294967296>>>c*8;var cipherCntr=Aes.cipher(counterBlock,keySchedule);var blockLength=b<blockCount-1?blockSize:(plaintext.length-1)%blockSize+1;var cipherChar=new Array(blockLength);for(var i=0;i<blockLength;i++){cipherChar[i]=cipherCntr[i]^plaintext.charCodeAt(b*blockSize+i);cipherChar[i]=String.fromCharCode(cipherChar[i])}ciphertxt[b]=cipherChar.join("")}var ciphertext=ctrTxt+ciphertxt.join("");ciphertext=Base64.encode(ciphertext);return ciphertext};Aes.Ctr.decrypt=function(ciphertext,password,nBits){password=password||"roadof_2018_@beijing_20180310_roadof_2018_@beijing";nBits=nBits||256;var blockSize=16;if(!(nBits==128||nBits==192||nBits==256))return"";ciphertext=Base64.decode(ciphertext);password=Utf8.encode(password);var nBytes=nBits/8;var pwBytes=new Array(nBytes);for(var i=0;i<nBytes;i++){pwBytes[i]=isNaN(password.charCodeAt(i))?0:password.charCodeAt(i)}var key=Aes.cipher(pwBytes,Aes.keyExpansion(pwBytes));key=key.concat(key.slice(0,nBytes-16));var counterBlock=new Array(8);var ctrTxt="";ctrTxt=ciphertext.slice(0,8);for(var i=0;i<8;i++)counterBlock[i]=ctrTxt.charCodeAt(i);var keySchedule=Aes.keyExpansion(key);var nBlocks=Math.ceil((ciphertext.length-8)/blockSize);var ct=new Array(nBlocks);for(var b=0;b<nBlocks;b++)ct[b]=ciphertext.slice(8+b*blockSize,8+b*blockSize+blockSize);ciphertext=ct;var plaintxt=new Array(ciphertext.length);for(var b=0;b<nBlocks;b++){for(var c=0;c<4;c++)counterBlock[15-c]=b>>>c*8&255;for(var c=0;c<4;c++)counterBlock[15-c-4]=(b+1)/4294967296-1>>>c*8&255;var cipherCntr=Aes.cipher(counterBlock,keySchedule);var plaintxtByte=new Array(ciphertext[b].length);for(var i=0;i<ciphertext[b].length;i++){plaintxtByte[i]=cipherCntr[i]^ciphertext[b].charCodeAt(i);plaintxtByte[i]=String.fromCharCode(plaintxtByte[i])}plaintxt[b]=plaintxtByte.join("")}var plaintext=plaintxt.join("");plaintext=Utf8.decode(plaintext);return plaintext};var Base64={};Base64.code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";Base64.encode=function(str,utf8encode){utf8encode=typeof utf8encode=="undefined"?false:utf8encode;var o1,o2,o3,bits,h1,h2,h3,h4,e=[],pad="",c,plain,coded;var b64=Base64.code;plain=utf8encode?str.encodeUTF8():str;c=plain.length%3;if(c>0){while(c++<3){pad+="=";plain+="\0"}}for(c=0;c<plain.length;c+=3){o1=plain.charCodeAt(c);o2=plain.charCodeAt(c+1);o3=plain.charCodeAt(c+2);bits=o1<<16|o2<<8|o3;h1=bits>>18&63;h2=bits>>12&63;h3=bits>>6&63;h4=bits&63;e[c/3]=b64.charAt(h1)+b64.charAt(h2)+b64.charAt(h3)+b64.charAt(h4)}coded=e.join("");coded=coded.slice(0,coded.length-pad.length)+pad;return coded};Base64.decode=function(str,utf8decode){utf8decode=typeof utf8decode=="undefined"?false:utf8decode;var o1,o2,o3,h1,h2,h3,h4,bits,d=[],plain,coded;var b64=Base64.code;coded=utf8decode?str.decodeUTF8():str;for(var c=0;c<coded.length;c+=4){h1=b64.indexOf(coded.charAt(c));h2=b64.indexOf(coded.charAt(c+1));h3=b64.indexOf(coded.charAt(c+2));h4=b64.indexOf(coded.charAt(c+3));bits=h1<<18|h2<<12|h3<<6|h4;o1=bits>>>16&255;o2=bits>>>8&255;o3=bits&255;d[c/4]=String.fromCharCode(o1,o2,o3);if(h4==64)d[c/4]=String.fromCharCode(o1,o2);if(h3==64)d[c/4]=String.fromCharCode(o1)}plain=d.join("");return utf8decode?plain.decodeUTF8():plain};var Utf8={};Utf8.encode=function(strUni){var strUtf=strUni.replace(/[\u0080-\u07ff]/g,function(c){var cc=c.charCodeAt(0);return String.fromCharCode(192|cc>>6,128|cc&63)});strUtf=strUtf.replace(/[\u0800-\uffff]/g,function(c){var cc=c.charCodeAt(0);return String.fromCharCode(224|cc>>12,128|cc>>6&63,128|cc&63)});return strUtf};Utf8.decode=function(strUtf){var strUni=strUtf.replace(/[\u00e0-\u00ef][\u0080-\u00bf][\u0080-\u00bf]/g,function(c){var cc=(c.charCodeAt(0)&15)<<12|(c.charCodeAt(1)&63)<<6|c.charCodeAt(2)&63;return String.fromCharCode(cc)});strUni=strUni.replace(/[\u00c0-\u00df][\u0080-\u00bf]/g,function(c){var cc=(c.charCodeAt(0)&31)<<6|c.charCodeAt(1)&63;return String.fromCharCode(cc)});return strUni};L.aexInstance=Aes.Ctr})();L.Utils=function(){var _handleFunction=undefined;var loged={localStorage:false,sessionStorage:false};_handleFunction={handleMediaPlayOnEvent:function(mediaElement,mediaElementId){try{L.Utils.removeEvent(mediaElement,"canplay",_handleFunction.handleMediaPlayOnEvent.bind(null,mediaElement,mediaElementId));L.Utils.removeEvent(mediaElement,"loadedmetadata",_handleFunction.handleMediaPlayOnEvent.bind(null,mediaElement,mediaElementId));L.Utils.removeEvent(mediaElement,"loadeddata",_handleFunction.handleMediaPlayOnEvent.bind(null,mediaElement,mediaElementId));if(mediaElement&&mediaElement.play&&typeof mediaElement.play==="function"){var playHandler=mediaElement.play();if(playHandler&&playHandler.catch&&typeof playHandler.catch==="function"){playHandler.catch(function(err){L.Logger.error("[ys-fake-sdk]media play err:",L.Utils.toJsonStringify(err),mediaElementId?" , media element id is "+mediaElementId:" media element:",!mediaElementId?mediaElement:"")})}}}catch(error){L.Logger.error("[ys-fake-sdk]media play error:",L.Utils.toJsonStringify(error),mediaElementId?" , media element id is "+mediaElementId:" media element:",!mediaElementId?mediaElement:"")}},handleMediaPauseOnEvent:function(mediaElement,mediaElementId){try{L.Utils.removeEvent(mediaElement,"canplay",_handleFunction.handleMediaPauseOnEvent.bind(null,mediaElement,mediaElementId));L.Utils.removeEvent(mediaElement,"loadedmetadata",_handleFunction.handleMediaPauseOnEvent.bind(null,mediaElement,mediaElementId));L.Utils.removeEvent(mediaElement,"loadeddata",_handleFunction.handleMediaPauseOnEvent.bind(null,mediaElement,mediaElementId));if(mediaElement&&mediaElement.pause&&typeof mediaElement.pause==="function"){var pauseHandler=mediaElement.pause();if(pauseHandler&&pauseHandler.catch&&typeof pauseHandler.catch==="function"){pauseHandler.catch(function(err){L.Logger.error("[ys-fake-sdk]media pause err:",L.Utils.toJsonStringify(err),mediaElementId?" , media element id is "+mediaElementId:" media element:",!mediaElementId?mediaElement:"")})}}}catch(error){L.Logger.error("[ys-fake-sdk]media pause error:",L.Utils.toJsonStringify(error),mediaElementId?" , media element id is "+mediaElementId:" media element:",!mediaElementId?mediaElement:"")}}};return{addEvent:function(element,eType,handle,bol){bol=bol!=undefined&&bol!=null?bol:false;if(element.addEventListener){element.addEventListener(eType,handle,bol)}else if(element.attachEvent){element.attachEvent("on"+eType,handle)}else{element["on"+eType]=handle}},removeEvent:function(element,eType,handle,bol){bol=bol!=undefined&&bol!=null?bol:false;if(element.removeEventListener){element.removeEventListener(eType,handle,bol)}else if(element.detachEvent){element.detachEvent("on"+eType,handle)}else{element["on"+eType]=null}},toJsonStringify:function(json,isChange){isChange=isChange!=undefined?isChange:true;if(!isChange){return json}if(!json){return json}try{if(typeof json!=="object"){return json}var jsonString=JSON.stringify(json);if(jsonString){json=jsonString}else{L.Logger.debug("[ys-fake-sdk]toJsonStringify:data is not json!")}}catch(e){L.Logger.debug("[ys-fake-sdk]toJsonStringify:data is not json!")}return json},toJsonParse:function(jsonStr,isChange){isChange=isChange!=undefined?isChange:true;if(!isChange){return jsonStr}if(!jsonStr){return jsonStr}try{if(typeof jsonStr!=="string"){return jsonStr}var json=JSON.parse(jsonStr);if(json){jsonStr=json}else{L.Logger.debug("[ys-fake-sdk]toJsonParse:data is not json string!")}}catch(e){L.Logger.debug("[ys-fake-sdk]toJsonParse:data is not json string!")}return jsonStr},encrypt:function(str,encryptRandom,encryptKey,encryptBit){if(!str){return str}encryptKey=encryptKey||YS.hexEncryptDecryptKey;encryptBit=encryptBit||YS.hexEncryptDecryptBit;encryptRandom=encryptRandom!=undefined?encryptRandom:"roadof_2018_@beijing";var out=L.aexInstance.encrypt(str,encryptKey,encryptBit);out=encryptRandom+out+encryptRandom;return out},decrypt:function(str,encryptRandom,encryptKey,encryptBit){if(!str){return str}encryptKey=encryptKey||YS.hexEncryptDecryptKey;encryptBit=encryptBit||YS.hexEncryptDecryptBit;encryptRandom=encryptRandom!=undefined?encryptRandom:"roadof_2018_@beijing";var regExp=new RegExp(encryptRandom,"gm");str=str.replace(regExp,"");var out=L.aexInstance.decrypt(str,encryptKey,encryptBit);return out},mediaPlay:function(mediaElement){var mediaElementId=undefined;if(mediaElement&&typeof mediaElement==="string"){mediaElement=document.getElementById(mediaElement)}else if(mediaElement&&/(audio|video)/g.test(mediaElement.nodeName.toLowerCase())&&mediaElement.getAttribute&&typeof mediaElement.getAttribute==="function"){mediaElementId=mediaElement.getAttribute("id")}if(mediaElement&&/(audio|video)/g.test(mediaElement.nodeName.toLowerCase())){if(mediaElement.readyState!==0){_handleFunction.handleMediaPlayOnEvent(mediaElement,mediaElementId)}else{L.Utils.removeEvent(mediaElement,"canplay",_handleFunction.handleMediaPlayOnEvent.bind(null,mediaElement,mediaElementId));L.Utils.removeEvent(mediaElement,"loadedmetadata",_handleFunction.handleMediaPlayOnEvent.bind(null,mediaElement,mediaElementId));L.Utils.removeEvent(mediaElement,"loadeddata",_handleFunction.handleMediaPlayOnEvent.bind(null,mediaElement,mediaElementId));L.Utils.addEvent(mediaElement,"canplay",_handleFunction.handleMediaPlayOnEvent.bind(null,mediaElement,mediaElementId));L.Utils.addEvent(mediaElement,"loadedmetadata",_handleFunction.handleMediaPlayOnEvent.bind(null,mediaElement,mediaElementId));L.Utils.addEvent(mediaElement,"loadeddata",_handleFunction.handleMediaPlayOnEvent.bind(null,mediaElement,mediaElementId))}}},mediaPause:function(mediaElement){var mediaElementId=undefined;if(mediaElement&&typeof mediaElement==="string"){mediaElement=document.getElementById(mediaElement)}else if(mediaElement&&/(audio|video)/g.test(mediaElement.nodeName.toLowerCase())&&mediaElement.getAttribute&&typeof mediaElement.getAttribute==="function"){mediaElementId=mediaElement.getAttribute("id")}if(mediaElement&&/(audio|video)/g.test(mediaElement.nodeName.toLowerCase())){if(mediaElement.readyState!==0){_handleFunction.handleMediaPauseOnEvent(mediaElement,mediaElementId)}else{L.Utils.removeEvent(mediaElement,"canplay",_handleFunction.handleMediaPauseOnEvent.bind(null,mediaElement,mediaElementId));L.Utils.removeEvent(mediaElement,"loadedmetadata",_handleFunction.handleMediaPauseOnEvent.bind(null,mediaElement,mediaElementId));L.Utils.removeEvent(mediaElement,"loadeddata",_handleFunction.handleMediaPauseOnEvent.bind(null,mediaElement,mediaElementId));L.Utils.addEvent(mediaElement,"canplay",_handleFunction.handleMediaPauseOnEvent.bind(null,mediaElement,mediaElementId));L.Utils.addEvent(mediaElement,"loadedmetadata",_handleFunction.handleMediaPauseOnEvent.bind(null,mediaElement,mediaElementId));L.Utils.addEvent(mediaElement,"loadeddata",_handleFunction.handleMediaPauseOnEvent.bind(null,mediaElement,mediaElementId))}}},localStorage:{setItem:function(key,value){try{if(window.localStorage){if(window.localStorage.setItem){window.localStorage.setItem(key,value)}else{L.Logger.warning("[ys-fake-sdk]Browser does not support localStorage.setItem , key is "+key+" , value is "+value+"!")}}else{if(!loged.localStorage){loged.localStorage=true;L.Logger.warning("[ys-fake-sdk]Browser does not support localStorage!")}}}catch(err){if(!loged.localStorage){loged.localStorage=true;L.Logger.warning("[ys-fake-sdk]Browser does not support localStorage , error info:",L.Utils.toJsonStringify(err))}}},getItem:function(key){try{if(window.localStorage){if(window.localStorage.getItem){return window.localStorage.getItem(key)}else{L.Logger.warning("[ys-fake-sdk]Browser does not support localStorage.getItem , key is "+key+" !");return""}}else{if(!loged.localStorage){loged.localStorage=true;L.Logger.warning("[ys-fake-sdk]Browser does not support localStorage!")}return""}}catch(err){if(!loged.localStorage){loged.localStorage=true;L.Logger.warning("[ys-fake-sdk]Browser does not support localStorage , error info:",L.Utils.toJsonStringify(err))}return""}},removeItem:function(key){try{if(window.localStorage){if(window.localStorage.removeItem){return window.localStorage.removeItem(key)}else{L.Logger.warning("[ys-fake-sdk]Browser does not support localStorage.removeItem , key is "+key+" !");return""}}else{if(!loged.localStorage){loged.localStorage=true;L.Logger.warning("[ys-fake-sdk]Browser does not support localStorage!")}return""}}catch(err){if(!loged.localStorage){loged.localStorage=true;L.Logger.warning("[ys-fake-sdk]Browser does not support localStorage , error info:",L.Utils.toJsonStringify(err))}return""}}},sessionStorage:{setItem:function(key,value){try{if(window.sessionStorage){if(window.sessionStorage.setItem){window.sessionStorage.setItem(key,value)}else{L.Logger.warning("[ys-fake-sdk]Browser does not support sessionStorage.setItem , key is "+key+" , value is "+value+"!")}}else{if(!loged.sessionStorage){loged.sessionStorage=true;L.Logger.warning("[ys-fake-sdk]Browser does not support sessionStorage!")}}}catch(err){if(!loged.sessionStorage){loged.sessionStorage=true;L.Logger.warning("[ys-fake-sdk]Browser does not support sessionStorage , error info:",L.Utils.toJsonStringify(err))}}},getItem:function(key){try{if(window.sessionStorage){if(window.sessionStorage.getItem){return window.sessionStorage.getItem(key)}else{L.Logger.warning("[ys-fake-sdk]Browser does not support sessionStorage.getItem , key is "+key+" !");return""}}else{if(!loged.sessionStorage){loged.sessionStorage=true;L.Logger.warning("[ys-fake-sdk]Browser does not support sessionStorage!")}return""}}catch(err){if(!loged.sessionStorage){loged.sessionStorage=true;L.Logger.warning("[ys-fake-sdk]Browser does not support sessionStorage , error info:",L.Utils.toJsonStringify(err))}return""}},removeItem:function(key){try{if(window.sessionStorage){if(window.sessionStorage.removeItem){return window.sessionStorage.removeItem(key)}else{L.Logger.warning("[ys-fake-sdk]Browser does not support sessionStorage.removeItem , key is "+key+" !");return""}}else{if(!loged.sessionStorage){loged.sessionStorage=true;L.Logger.warning("[ys-fake-sdk]Browser does not support sessionStorage!")}return""}}catch(err){if(!loged.sessionStorage){loged.sessionStorage=true;L.Logger.warning("[ys-fake-sdk]Browser does not support sessionStorage , error info:",L.Utils.toJsonStringify(err))}return""}}}}}(L);var YS=YS||{};var JsSocket={};YS.fakeScoketIO=function(room){var that={};var _callbackList={},_allbackSeq=0,_awitSocketBindEventList={};that.bindAwitSocketListEvent=function(){for(var type in _awitSocketBindEventList){var callback=_awitSocketBindEventList[type];delete _awitSocketBindEventList[type];that.on(type,callback)}};that.on=function(type,callback){if(!type){L.Logger.error("[ys-fake-sdk]socket bind event name is must exist!");return}if(!callback){L.Logger.error("[ys-fake-sdk]socket bind event callback is must exist!");return}var _callback=function(){var args=[];var argumentsJson={};for(var i=0;i<arguments.length;i++){args[i]=typeof arguments[i]==="string"?L.Utils.toJsonParse(arguments[i]):arguments[i];argumentsJson[i]=args[i]}L.Logger.debug("[ys-fake-sdk]logMessage info: receive event("+type+") callback arguments json is "+L.Utils.toJsonStringify(argumentsJson));if(YS.global.fakeJsSdkInitInfo.mobileInfo.isSendLogMessageToProtogenesis&&YS.SDKNATIVENAME==="MobileNativeRoom"){if(type!=="printLogMessage"&&type!=="JsSocketCallback"){that.emit("printLogMessage",L.Utils.toJsonStringify({eventType:type,receiveData:args}))}}callback.apply(callback,args)};switch(YS.SDKNATIVENAME){case"QtNativeClientRoom":if(window.qtContentYsClient){try{L.Logger.debug("[ys-fake-sdk]Bind qt event , event name is "+type);window.qtContentYsClient[type].connect(_callback)}catch(e){L.Logger.error("[ys-fake-sdk]Bind qt event fail , event name is "+type,e)}}else{L.Logger.warning("[ys-fake-sdk]window.qtContentYsClient is not exist , save event to list awit socket bind , event name is "+type+" !");_awitSocketBindEventList[type]=_callback}break;case"MobileNativeRoom":L.Logger.debug("[ys-fake-sdk]Bind mobile event , event name is "+type);JsSocket[type]=_callback;break;default:L.Logger.error("[ys-fake-sdk]socket.on:room is not init , sdkNativeName is "+YS.SDKNATIVENAME+"!");break}};that.emit=function(type,params,callback){if(type==="printLogMessage"&&YS.SDKNATIVENAME!=="MobileNativeRoom"){L.Logger.warning("[ys-fake-sdk]socket.emit event name is printLogMessage , not emit event , because event triggering must be in the mobile app environment.");return}var _params={};L.Logger.debug("[ys-fake-sdk]socket.emit event name is "+type);if(callback&&typeof callback==="function"){var seq=_getCallbackSeq();_callbackList[seq]=callback;_params.callbackID=seq}if(typeof params==="object"){for(var key in params){if(key!=="callbackID"){_params[key]=params[key]}}}else{if(typeof params==="string"){var paramsCopy=L.Utils.toJsonParse(params);if(typeof paramsCopy==="object"){for(var key in paramsCopy){if(key!=="callbackID"){_params[key]=paramsCopy[key]}}}else{if(_params.callbackID!==undefined){_params["params"]=params}else{_params=params}}}else{if(_params.callbackID!==undefined){_params["params"]=params}else{_params=params}}}switch(YS.SDKNATIVENAME){case"QtNativeClientRoom":if(window.qtContentYsClient){if(window.qtContentYsClient["onWeb_"+type]){L.Logger.debug("[ys-fake-sdk]socket.emit:window.qtContentYsClient."+"onWeb_"+type+" has been performed!");if(_params===undefined){window.qtContentYsClient["onWeb_"+type]("")}else{if(typeof _params==="object"){_params=L.Utils.toJsonStringify(_params)}window.qtContentYsClient["onWeb_"+type](_params)}}else{L.Logger.error("[ys-fake-sdk]socket.emit:window.qtContentYsClient."+"onWeb_"+type+" is not exist!")}}else{L.Logger.error("[ys-fake-sdk]window.qtContentYsClient is not exist!")}break;case"MobileNativeRoom":var clientType=YS.global.fakeJsSdkInitInfo.mobileInfo.clientType;if(clientType===undefined||clientType===null){if(window.JSWhitePadInterface||window.JSVideoWhitePadInterface){clientType=L.Constant.clientType.android}else if(window.webkit&&window.webkit.messageHandlers){clientType=L.Constant.clientType.ios}}switch(clientType){case L.Constant.clientType.ios:if(window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers[type]){L.Logger.debug("[ys-fake-sdk]socket.emit:window.webkit.messageHandlers."+type+".postMessage has been performed!");if(_params===undefined){window.webkit.messageHandlers[type].postMessage({data:""})}else{if(typeof _params==="object"){_params=L.Utils.toJsonStringify(_params)}window.webkit.messageHandlers[type].postMessage({data:_params})}}else{L.Logger.error("[ys-fake-sdk]socket.emit:window.webkit.messageHandlers."+type+".postMessage is not exist!")}break;case L.Constant.clientType.android:if(YS.extendSendInterfaceName==="_videoWhiteboardPage"){if(window.JSVideoWhitePadInterface&&window.JSVideoWhitePadInterface[type]){L.Logger.debug("[ys-fake-sdk]socket.emit:window.JSVideoWhitePadInterface."+type+" has been performed!");if(_params===undefined){window.JSVideoWhitePadInterface[type]("")}else{if(typeof _params==="object"){_params=L.Utils.toJsonStringify(_params)}window.JSVideoWhitePadInterface[type](_params)}}else{L.Logger.error("[ys-fake-sdk]socket.emit:window.JSVideoWhitePadInterface."+type+" is not exist!")}}else{if(window.JSWhitePadInterface&&window.JSWhitePadInterface[type]){L.Logger.debug("[ys-fake-sdk]socket.emit:window.JSWhitePadInterface."+type+" has been performed!");if(_params===undefined){window.JSWhitePadInterface[type]("")}else{if(typeof _params==="object"){_params=L.Utils.toJsonStringify(_params)}window.JSWhitePadInterface[type](_params)}}else{L.Logger.error("[ys-fake-sdk]socket.emit:window.JSWhitePadInterface."+type+" is not exist!")}}break;default:L.Logger.error("[ys-fake-sdk]clientType is undefinable , will not be able to execute method "+type+" , clientType is "+clientType);break}break;default:L.Logger.error("[ys-fake-sdk]socket.emit:room is not init , sdkNativeName is "+YS.SDKNATIVENAME+"!");break}};that.on("JsSocketCallback",function(callbackID,params){if(_callbackList[callbackID]){if(typeof _callbackList[callbackID]==="function"){_callbackList[callbackID](params)}delete _callbackList[callbackID]}});function _getCallbackSeq(){return++_allbackSeq}return that};